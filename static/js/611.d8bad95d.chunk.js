"use strict";(self.webpackChunkcanvas_node_app=self.webpackChunkcanvas_node_app||[]).push([[611],{4795:function(e,n,t){t.r(n),t.d(n,{default:function(){return Q}});var i=t(2791);var a=t.p+"static/media/magnify.5bd5a8ba0417ef145ef9778df8e9bede.svg";var r,o,l,d,s,c,u=t.p+"static/media/bell-badge.73f78bfe18d85acc017e64c55c7e4d96.svg",f=t.p+"static/media/user-avatar.8d923c4104305490b20d.png",p=t(168),g=t(6444),x=g.ZP.div(r||(r=(0,p.Z)(["\n  background-color: var(--default-interface-white);\n  border-bottom: 1px solid var(--default-interface-gray-300);\n  padding: 24px 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  .directory{\n    color: var(--default-interface-gray-700);\n  }\n  .current_flow{\n    color: var(--default-brand-navy);\n  }\n  .current_user{\n    border-radius: 2px;\n    padding: 2px;\n    background-color: var(--default-brand-green);\n    margin-left: 4px;\n    color: var(--default-brand-navy);\n  }\n  .actions{\n    display: flex;\n    gap: 24px;\n    align-items: center;\n    .action-button{\n        cursor: pointer;\n        &.profile-icon{\n            width: 32px;\n            height: 32px;\n            img{\n                width: 100%;\n                height: 100%;\n            }\n        }\n    }\n  }\n"]))),h=g.ZP.div(o||(o=(0,p.Z)(["\n  border: 2px solid var(--default-interface-gray-400);\n  background-color: var(--default-interface-white);\n  padding: 12px;\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  gap: 9px;\n  font-size: 18px;\n  color: var(--default-interface-navy-400);\n  font-weight: 500;\n  width: 300px;\n  justify-content: center;\n  img {\n    width: 30px;\n    height: 30px;\n  }\n"]))),m=g.ZP.div(l||(l=(0,p.Z)(["\n  width: calc(100vw - 64px); \n  height: calc(100vh - 90px);\n  .reactflow-wrapper{\n    height: 100%;\n    .download-icon{\n      width: 40px;\n      height: 40px;\n      img{\n        width: 100%;\n        height: 100%;\n      }\n    }\n  }\n"]))),v=g.ZP.div(d||(d=(0,p.Z)(["\n  position: fixed;\n  left: 72px;\n  top: 50%;\n  transform: translateY(-50%);\n  background: var(--default-interface-white);\n  border: 1px solid var(--default-interface-gray-300);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  border-radius: 8px;\n  padding: 8px;\n  gap: 8px;\n  .stencil-item{\n    &:hover{\n      cursor: pointer;\n    }\n    &:active{\n      cursor: grab;\n    }\n  }\n"]))),b=g.ZP.div(s||(s=(0,p.Z)(["\n  position: absolute;\n  top: 81px;\n  right: 0;\n  background: var(--default-interface-white);\n  border-left: 1px solid var(--default-interface-gray-300);\n  height: calc(100vh - 81px);\n  width: 660px;\n  z-index: 1;\n  .header{\n    padding: 12px 20px;\n    box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.05);\n    color: var(--default-interface-navy-400);\n    font-size: 18px;\n    font-weight: 500;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    .close{\n      cursor: pointer;\n      background: transparent;\n      outline: none;\n      border: 0;\n    }\n  }\n  form{\n    padding: 24px 86px 24px 24px;\n    .form-heading{\n      font-weight: 500;\n      font-size: 16px;\n      line-height: 22px;\n      color: var(--default-interface-navy-400);\n    }\n    .form-actions{\n      margin-top: 16px;\n      display: flex;\n      justify-content: flex-end;\n      gap: 8px;\n    }\n    .error-without-saving{\n      color: var(--default-interface-apricot-500);\n      font-size: 12px;\n      margin-top: 12px;\n    }\n  }\n"]))),y=g.ZP.label(c||(c=(0,p.Z)(['\n  margin-top: 16px;\n  display: block;\n  .field-label{\n    font-weight: 400;\n    font-size: 14px;\n    line-height: 22px;\n    color: var(--default-interface-navy-400);\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    .info-icon{\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      cursor: pointer;\n    }\n  }\n  input[type="text"], input[type="url"]{\n    margin-top: 8px;\n    border: 1px solid var(--default-interface-gray-300);\n    width: calc(100% - 28px);\n    height: 38px;\n    outline: none;\n    color: var(--default-interface-navy-400);\n    padding-left: 12px;\n    padding-right: 12px;\n    font-family: \'Inter\', sans-serif;\n    font-size: 14px;\n    line-height: 22px;\n  }\n  .file-upload{\n    padding: 6px 16px;\n    border-radius: 2px;\n    border: 1px solid #D9D9D9;\n    width: max-content;\n    margin-top: 8px;\n    font-weight: 400;\n    font-size: 14px;\n    color: var(--default-interface-navy-400);\n    display: flex;\n    gap: 8px;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    .upload-icon{\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n  }\n  input[type="file"]{\n    display: none;\n  }\n  .field-error{\n    color: var(--default-interface-apricot-500);\n    font-size: 12px;\n    margin-top: 2px;\n  }\n']))),j=t(3329),w=function(){return(0,j.jsxs)(x,{children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("span",{className:"directory",children:"Workflows / editor / "}),(0,j.jsx)("span",{className:"current_flow",children:"signup_v1"}),(0,j.jsx)("span",{className:"current_user",children:"[DEV]"})]}),(0,j.jsxs)("div",{className:"actions",children:[(0,j.jsx)("span",{className:"action-button",children:(0,j.jsx)("img",{src:a,alt:"search"})}),(0,j.jsx)("span",{className:"action-button",children:(0,j.jsx)("img",{src:u,alt:"notification"})}),(0,j.jsx)("span",{className:"action-button profile-icon",children:(0,j.jsx)("img",{src:f,alt:"profile"})})]})]})},N=t(1413),Z=t(9439),k=t(6171),S=t(7570),C=t(1247),D=t(7764),L=t(5048),I=function(){return(0,L.I0)()},q=L.v9,T=t(6653);var E=t.p+"static/media/download.4a11b21d226a51809bb1405c934b4ed9.svg",P=JSON.parse('{"t":[{"id":1,"data":{"label":"HTTP Trigger","image":{"url":"https://i.imgur.com/BYtog9b.png","alt":"http trigger"},"configuration":{"heading":"Sandbox URL","inputs":[{"id":1,"inputLabel":"URL","fieldName":"url","type":"url","info":"Info","placeholder":"","value":""}]}}},{"id":2,"data":{"label":"SignUp Page","image":{"url":"https://i.imgur.com/zwoMqDf.png","alt":"sign up page"},"configuration":{"heading":"SignUp Page","inputs":[{"id":1,"inputLabel":"Page Title","type":"text","fieldName":"page-title","info":"Info","placeholder":"page title","value":"","config":{"required":"Field is required"}},{"id":2,"inputLabel":"Subheading","fieldName":"sub-heading","type":"text","info":"Info","placeholder":"subheading","value":"","config":{"required":"Field is required"}},{"id":3,"inputLabel":"Brand Logo","fieldName":"brand-logo","type":"image-upload","info":"Info","placeholder":"","value":"","config":{"required":"Field is required"}},{"id":4,"inputLabel":"Email Input Title","fieldName":"email-input-title","type":"text","info":"Info","placeholder":"input title","value":"","config":{"required":"Field is required"}},{"id":5,"inputLabel":"Email Input Placeholder","fieldName":"email-input-placeholder","type":"text","info":"Info","placeholder":"placeholder text","value":"","config":{"required":"Field is required"}},{"id":6,"inputLabel":"Submit Button Text","fieldName":"submit-button-text","type":"text","info":"Info","placeholder":"CTA text","value":"","config":{"required":"Field is required"}}]}}},{"id":3,"data":{"label":"Redirect User","image":{"url":"https://i.imgur.com/ftA2Wfh.png","alt":"redirectUser"},"configuration":{"heading":"Redirect URL","inputs":[{"id":1,"inputLabel":"URL","fieldName":"url","type":"url","info":"Info","placeholder":"https://","value":""}]}}}]}'),R=function(){return(0,j.jsx)(v,{children:P.t.map((function(e){return(0,j.jsx)("div",{title:e.data.label,className:"stencil-item",onDragStart:function(n){return function(e,n){e.dataTransfer.setData("application/reactflow","customNode"),e.dataTransfer.setData("node-data",JSON.stringify(n)),(0,N.Z)({},e).dataTransfer.effectAllowed="move"}(n,e.data)},draggable:!0,children:(0,j.jsx)("img",{src:e.data.image.url,alt:e.data.image.url})},e.id)}))})},U=function(e){var n=e.data;return(0,j.jsxs)(h,{className:"node-item",children:[(0,j.jsx)(k.HH,{type:"target",position:k.Ly.Top,id:"node-handler-top"}),(0,j.jsx)("img",{src:n.image.url,alt:"node"}),(0,j.jsx)("div",{children:n.label}),(0,j.jsx)(k.HH,{type:"source",position:k.Ly.Bottom,id:"node-handler-bottom"})]})},O=t(4165),F=t(5861),z=t(1134),_=t(216),B=t(6689);var J,V=t.p+"static/media/upload.8049f28a133db5ef11428ac6551d9832.svg",A=function(e){var n=e.type,t=e.fieldName,i=e.config,a=e.id,r=e.placeholder,o=e.setImageData,l=(0,z.Gc)().register;switch(n){case"text":return(0,j.jsx)("input",(0,N.Z)({id:a,type:"text",placeholder:r},l(t,i)));case"url":return(0,j.jsx)("input",(0,N.Z)({id:a,type:"url"},l(t,{required:"Field is required",pattern:{value:B.s,message:"Enter valid link"}})));case"image-upload":return(0,j.jsxs)("label",{htmlFor:"input-file",className:"file-upload",children:[(0,j.jsx)("span",{className:"upload-icon",children:(0,j.jsx)("img",{src:V,alt:"upload"})}),(0,j.jsx)("span",{children:"Click to Upload"}),(0,j.jsx)("input",{id:"input-file",type:"file",onChange:function(e){if(e.target.files&&e.target.files.length&&("image/png"===e.target.files[0].type||"image/jpeg"===e.target.files[0].type||"image/gif"===e.target.files[0].type||"image/svg+xml"===e.target.files[0].type)){var n=new FileReader;n.readAsDataURL(e.target.files[0]),n.onload=function(){n.result&&o(n.result.toString())}}}})]});default:return(0,j.jsx)("input",{id:a,type:"text"})}},H=t(4925),Y=g.ZP.button(J||(J=(0,p.Z)(["\n  background: ",";\n  color: ",";\n  border: ",";\n  padding: 8px 16px;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: 500;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 14px;\n  font-family: 'Inter', sans-serif;\n"])),(function(e){return"primary"===e.usage?"var(--default-interface-indigo-500)":"var(--default-interface-gray-100)"}),(function(e){return"primary"===e.usage?"var(--default-interface-white)":"var(--default-interface-navy-400)"}),(function(e){return"primary"===e.usage?"2px solid var(--default-interface-indigo-400)":"2px solid var(--default-interface-gray-700)"})),M=["label","type","usage"],W=function(e){var n=e.label,t=e.type,i=void 0===t?"submit":t,a=e.usage,r=(0,H.Z)(e,M);return(0,j.jsx)(Y,(0,N.Z)((0,N.Z)({usage:a},r),{},{type:i,children:n}))};var G=t.p+"static/media/close.ae927e973247005a6739501933ee22c1.svg";var K=t.p+"static/media/info-circle.594e2567684bb31621dda2cdc7b60bcf.svg",X=(t(6699),function(e){var n=e.node,t=e.setCurrentNodeOpened,a=(0,z.cI)({mode:"onBlur"}),r=I(),o=a.handleSubmit,l=a.setError,d=a.formState.errors,s=a.setValue,c=a.trigger,u=(0,i.useState)([]),f=(0,Z.Z)(u,2),p=f[0],g=f[1],x=(0,i.useState)(!1),h=(0,Z.Z)(x,2),m=h[0],v=h[1],w=(0,i.useState)(""),k=(0,Z.Z)(w,2),S=k[0],C=k[1],D=q((function(e){return e.app.workflow}));(0,i.useEffect)((function(){var e,t,i;if(null!==n&&void 0!==n&&null!==(e=n.data)&&void 0!==e&&null!==(t=e.configuration)&&void 0!==t&&null!==(i=t.inputs)&&void 0!==i&&i.length){var a=n.data.configuration.inputs;g(a)}else g([])}),[n]),(0,i.useEffect)((function(){p.forEach((function(e){var n=e.value;s(e.fieldName,n)}))}),[p]);var L=function(){var e=(0,F.Z)((0,O.Z)().mark((function e(){var i,a,r,o,l,d;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=8;break}return e.next=3,c();case 3:r=e.sent,o=!0,l=D.nodes.find((function(e){return e.id===n.id})),(d=null===l||void 0===l||null===(i=l.data)||void 0===i||null===(a=i.configuration)||void 0===a?void 0:a.inputs)&&(d.forEach((function(e){0===e.value.length&&(o=!1)})),r&&o&&t(null),v(!(!r||o)));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(e,n){l(e,{type:"custom",message:n})};return n?(0,j.jsxs)(b,{children:[(0,j.jsxs)("div",{className:"header",children:[(0,j.jsx)("span",{children:n.data.label}),(0,j.jsx)("button",{type:"button",className:"close",onClick:L,children:(0,j.jsx)("img",{src:G,alt:"close"})})]}),(0,j.jsxs)("form",{method:"POST",action:"#",onSubmit:o((function(e){if(n){var t=JSON.parse(JSON.stringify(n));t.data.configuration.inputs=t.data.configuration.inputs.map((function(n){var t=(0,N.Z)({},n);return t.value=e[n.fieldName],"brand-logo"===n.fieldName&&(t.value=S),t}));var i=D.nodes.map((function(e){return e.id===n.id?t:e})),a=(0,N.Z)({},D);a.nodes=i,r((0,T.fC)(a)),v(!1)}})),noValidate:!0,autoComplete:"off",children:[(0,j.jsx)("div",{className:"form-heading",children:n.data.configuration.heading}),(0,j.jsx)(_.u,{id:"field-info"}),(0,j.jsx)(z.RV,(0,N.Z)((0,N.Z)({},a),{},{children:p.map((function(e){return(0,j.jsxs)(y,{htmlFor:e.fieldName,children:[(0,j.jsxs)("div",{className:"field-label",children:[(0,j.jsx)("span",{children:e.inputLabel}),(0,j.jsx)("span",{className:"info-icon","data-tooltip-id":"field-info","data-tooltip-content":e.info,children:(0,j.jsx)("img",{src:K,alt:"info"})})]}),(0,j.jsx)(A,(0,N.Z)((0,N.Z)({setError:E},e),{},{setImageData:C})),(0,j.jsx)(j.Fragment,{children:Object.keys(d).map((function(n){var t,i;return e.fieldName===n?(0,j.jsx)("div",{className:"field-error",children:null===(t=d[n])||void 0===t||null===(i=t.message)||void 0===i?void 0:i.toString()},"field-error"):null}))})]},e.id)}))})),m&&0===Object.keys(d).length&&(0,j.jsx)("div",{className:"error-without-saving",children:"Please save before closing"}),(0,j.jsxs)("div",{className:"form-actions",children:[(0,j.jsx)(W,{type:"button",label:"Cancel",usage:"secondary",onClick:L}),(0,j.jsx)(W,{type:"submit",label:"Save",usage:"primary"})]})]})]}):null}),$=(t(8107),function(){var e=I(),n=q((function(e){return e.app.workflow})),t=(0,i.useRef)(null),a=(0,k.Kr)("Delete"),r=(0,i.useState)(null),o=(0,Z.Z)(r,2),l=o[0],d=o[1],s=(0,i.useState)(null),c=(0,Z.Z)(s,2),u=c[0],f=c[1],p=(0,k.Rr)([]),g=(0,Z.Z)(p,3),x=g[0],h=g[1],m=g[2],v=(0,k.ll)([]),b=(0,Z.Z)(v,3),y=b[0],w=b[1],L=b[2],P=(0,i.useState)(null),O=(0,Z.Z)(P,2),F=O[0],z=O[1],_=(0,i.useCallback)((function(e){return w((function(n){return(0,k.Z_)(e,n)}))}),[]),B=(0,i.useMemo)((function(){return{customNode:U}}),[]);(0,i.useEffect)((function(){if(x.length||y.length){var n={nodes:x,edges:y};e((0,T.fC)(n))}}),[x.toString(),y.toString()]),(0,D.q)((function(){n&&n.nodes.length&&(h(n.nodes),w(n.edges))})),(0,i.useEffect)((function(){l&&a&&h(x.filter((function(e){return e.id!==l.toString()})))}),[a,l]);var J=(0,i.useCallback)((function(e){e.preventDefault(),(0,N.Z)({},e).dataTransfer.dropEffect="move"}),[]),V=(0,i.useCallback)((function(e){if(e.preventDefault(),t&&t.current&&u){var n=t.current.getBoundingClientRect(),i=e.dataTransfer.getData("application/reactflow"),a=JSON.parse(e.dataTransfer.getData("node-data")),r=a.label,o=a.image,l=a.configuration,d=o.url,s=o.alt;if("undefined"===typeof i||!i)return;var c=u.project({x:e.clientX-n.left,y:e.clientY-n.top}),f={id:crypto.randomUUID(),type:i,position:c,data:{label:r,image:{url:d,alt:s},configuration:l}};h((function(e){return e.concat(f)}))}}),[u]);return(0,j.jsxs)(k.tV,{children:[(0,j.jsx)(X,{node:F,setCurrentNodeOpened:z}),(0,j.jsx)("div",{className:"reactflow-wrapper",ref:t,children:(0,j.jsxs)(k.x$,{nodes:x,nodeTypes:B,edges:y,onNodesChange:m,onEdgesChange:L,onConnect:_,onInit:f,onDrop:V,onDragOver:J,onSelectionChange:function(e){e&&e.nodes&&e.nodes.length&&d(e.nodes[0].id)},onNodeDoubleClick:function(e,t){var i=n.nodes.find((function(e){return e.id===t.id}));i&&!F&&z(i)},onNodeDragStop:function(n,t){if(x.length||y.length){var i={nodes:x,edges:y};e((0,T.fC)(i))}},fitView:!0,children:[(0,j.jsx)(S.A,{}),(0,j.jsx)(C.Z,{children:(0,j.jsx)(C.B,{onClick:function(){return function(){var e=document.createElement("a"),t=JSON.stringify(n);e.href=URL.createObjectURL(new Blob([t],{type:"application/json"})),e.download="workflow.json",e.click()}()},children:(0,j.jsx)("span",{className:"download-icon",children:(0,j.jsx)("img",{src:E,alt:"download"})})})})]})}),(0,j.jsx)(R,{})]})}),Q=function(){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(w,{}),(0,j.jsx)(m,{children:(0,j.jsx)($,{})})]})}}}]);
//# sourceMappingURL=611.d8bad95d.chunk.js.map